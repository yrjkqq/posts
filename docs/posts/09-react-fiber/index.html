<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>React Fiber 架构 - That&#39;s the Way It Is</title><link rel="icon" type="image/png" href=/posts/img/favicon.ico /><meta name="viewport" content="width=device-width, initial-scale=1">

	<meta property="og:description" content="React 16 引入新的 Fiber 架构" />
	<meta name="twitter:description" content="React 16 引入新的 Fiber 架构" />
	<meta name="description" content="React 16 引入新的 Fiber 架构" />
	<meta name="description" content="React 16 引入新的 Fiber 架构" />

	<meta property="og:title" content="React Fiber 架构 | That&#39;s the Way It Is" />
	<meta name="twitter:title" content="React Fiber 架构 | That&#39;s the Way It Is" />

	<meta property="og:image" content=""/>
	<meta itemprop="name" content="React Fiber 架构 | That&#39;s the Way It Is" />
	<meta name="application-name" content="React Fiber 架构 | That&#39;s the Way It Is" />
	<meta property="og:site_name" content="" />
	<meta property="og:title" content="React Fiber 架构" />
<meta property="og:description" content="React 16 引入新的 Fiber 架构" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yrjkqq.github.io/posts/posts/09-react-fiber/" />
<meta property="article:published_time" content="2020-11-12T11:12:00+08:00" />
<meta property="article:modified_time" content="2020-11-12T11:12:00+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="React Fiber 架构"/>
<meta name="twitter:description" content="React 16 引入新的 Fiber 架构"/>

	<link href="https://yrjkqq.github.io/posts/css/fonts.css" rel="stylesheet">
	
	<link rel="stylesheet" type="text/css" media="screen" href="https://yrjkqq.github.io/posts/css/main.css" /><link rel="stylesheet" type="text/css" href="https://yrjkqq.github.io/posts/css/dark.css" media="(prefers-color-scheme: dark)" />
	
	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="https://yrjkqq.github.io/posts/">That&#39;s the Way It Is</a>
	</div>
	<nav>
		
		<a href="/posts/tags">Tags</a>
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">React Fiber 架构</h1>
			<div class="meta">Posted on Nov 12, 2020</div>
		</div>
		

		<section class="body">
			<p>Fiber 架构主要是使用了新的 reconciler 调谐器，区别于 React 15 的 stack reconciler 调谐器。</p>
<p>Reconciliation 协调主要是是 Diffing 算法。基于两个前提：</p>
<ul>
<li>两个不同类型的元素会产生不同的树</li>
<li>开发者可以通过 key prop 来暗示那些子元素在不同的渲染下能保持稳定</li>
</ul>
<p>启发性算法复杂度由之前的 O(n^3) 将低到 O(n)。</p>
<p>不同类型的元素：根节点不通，直接会卸载原来的树并构建新的树。</p>
<p>对比同一类型的 DOM 元素：保留 DOM 节点，仅比对及更新有改变的属性。</p>
<p>同一类型的组件元素：当一个组件更新时，组件实例保持不变，state 在跨越不同的渲染时保持一致。React 将更新组件实例的 props 以跟最新的元素保持一致，并调用 componentWillUpdate 方法。</p>
<p>下一步调用 render 方法，diff 算法将在之前的结果以及新的结果中进行递归。</p>
<p>key 属性，React 使用 key 属性来匹配原有树上的子元素和最新树上的子元素，匹配到则检测更新，否则就新增结点或删除。没有 key 则会对整个节点树进行比较。</p>
<p>满足假设：</p>
<ul>
<li>类似的组件应该封装成同一类型，有利于 React 进行匹配</li>
<li>key 保持稳定并唯一。</li>
</ul>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/posts/tags/node">Node</a></li>
					
				</ul>
			</nav>
			
			
		</div>
	</article>
</main>
<footer>
<hr>⚡️
	2020  © yrjkqq |  <a href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
</footer>


</div>
    </body>
</html>
